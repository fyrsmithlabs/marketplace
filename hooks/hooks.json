{
  "hooks": {
    "SessionStart": [
      {
        "matcher": "startup|resume|clear|compact",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "${CLAUDE_PLUGIN_ROOT}/hooks/session-start.md"
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "${CLAUDE_PLUGIN_ROOT}/hooks/prompt-reminder.md"
          },
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/hooks/context-monitor.sh"
          }
        ]
      }
    ],
    "PreCompact": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/hooks/precompact.sh"
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Write|Edit",
        "config": {
          "type": "prompt",
          "prompt": "Before writing/editing files, verify:\n1. No agent artifacts (TODO.md, PLAN.md, *.task) in repo root - must go to docs/.claude/\n2. No secrets or API keys in content\n3. If creating new file, verify it follows naming conventions (kebab-case)\n\nIf violations found, BLOCK with explanation. Otherwise, ALLOW.",
          "mode": "filter"
        }
      },
      {
        "matcher": "Bash",
        "config": {
          "type": "prompt",
          "prompt": "Before executing git commit:\n1. Verify commit message follows Conventional Commits format: <type>(<scope>): <description>\n2. Valid types: feat, fix, docs, style, refactor, perf, test, chore, build, ci, revert\n3. Description should be lowercase, no period at end, max 72 chars\n\nIf 'git commit' command doesn't follow format, BLOCK with correct format suggestion. Otherwise, ALLOW.",
          "mode": "filter"
        }
      },
      {
        "matcher": "Bash",
        "config": {
          "type": "prompt",
          "prompt": "If this is a 'git commit' command AND staged files include skills/**:\n\n1. Identify which skills have staged changes by parsing paths\n2. For each affected skill, run /test-skill <skill-name>\n3. If ANY scenario fails:\n   - BLOCK the commit\n   - Create TodoWrite items for each failure:\n     - 'Fix skill: <skill> - scenario <name> rationalization: <phrase>'\n   - Display failure summary\n4. If all scenarios pass:\n   - ALLOW the commit\n   - Report: 'Pressure tests passed for: <skills>'\n\nTo check staged files: git diff --cached --name-only | grep '^skills/'\nExtract skill name from path: skills/<skill-name>/...",
          "mode": "filter"
        }
      }
    ],
    "PostToolUse": [
      {
        "matcher": {
          "tool_name": "Bash",
          "exit_code_not": 0
        },
        "hooks": [
          {
            "type": "prompt",
            "prompt": "${CLAUDE_PLUGIN_ROOT}/hooks/error-diagnose.md"
          }
        ]
      },
      {
        "matcher": "Write|Edit",
        "config": {
          "type": "prompt",
          "prompt": "## YAGNI Pattern Check\n\nAnalyze the Write/Edit for over-engineering.\n\n**Patterns:**\n- abstraction: Filename contains Factory/Manager/Provider/Handler/Helper/Utils/Base/Abstract/Wrapper/Builder/Coordinator/Orchestrator\n- config-addiction: Feature flag/env var for single-use behavior\n- dead-code: 10+ commented lines or unused imports\n\n**Skip:** generated/, vendor/, node_modules/, migrations/, test files, .claude/yagni.local.md exclusions\n\n**If detected, output:**\n```\n⚠️ YAGNI: [pattern]\n├─ Trigger: [what]\n├─ Concern: [why]\n└─ Simpler: [alternative]\nOptions: Dismiss | Snooze | /yagni config\n```\n\n**If no pattern:** Silent.",
          "mode": "notify"
        }
      },
      {
        "matcher": "TodoWrite",
        "config": {
          "type": "prompt",
          "prompt": "## YAGNI Scope Check\n\nOn todo completion, check for scope creep.\n\n**Trigger:** Task has simple keyword (fix/typo/rename/tweak) but touched 5+ files.\n\n**If detected, output:**\n```\n⚠️ YAGNI: scope-creep\n├─ Trigger: [task] touched [N] files\n├─ Concern: Simple task expanded beyond scope\n└─ Simpler: Stay focused on original task\nOptions: Dismiss | Snooze | /yagni config\n```\n\n**If no scope creep:** Silent.",
          "mode": "notify"
        }
      },
      {
        "matcher": "Write",
        "config": {
          "type": "prompt",
          "prompt": "After file creation, check if this is a new repository being set up. If so, verify:\n1. README.md exists with required sections (title, badges, description, install, usage, license)\n2. CHANGELOG.md exists with [Unreleased] section\n3. .gitignore exists with docs/.claude/ ignored\n4. LICENSE exists (or is planned)\n5. .gitleaks.toml exists (or is planned)\n\nReport any missing required files as warnings.",
          "mode": "notify"
        }
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "${CLAUDE_PLUGIN_ROOT}/hooks/stop-reminder.md"
          }
        ]
      }
    ]
  }
}
