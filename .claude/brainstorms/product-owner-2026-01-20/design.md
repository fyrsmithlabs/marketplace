# Product Owner Agent System - Design Document

**Date**: 2026-01-20
**Tier**: STANDARD (9/15)
**Status**: Phase 1 Approved

---

## Overview

A Claude-native product owner agent that provides daily standups, priority synthesis, and GitHub Discussion output for fyrsmithlabs projects.

## Goals

1. **Personal productivity** - Help developers know what to work on next
2. **Team visibility** - Give visibility into project state via GitHub Discussions
3. **Cross-project coordination** - (Phase 2) Coordinate across fyrsmithlabs repos
4. **Autonomous agent prioritization** - (Phase 3) Set priorities for autonomous agents

## Phase 1 Scope (KISS)

### In Scope
- Single `product-owner` agent
- `/standup` command
- Terminal output (existing)
- GitHub Discussion output (daily thread)
- GitHub (visibility) + contextd (state) storage
- Single repo only

### Deferred to Phase 2+
- Cross-project `--platform` mode
- Slack/webhook integration
- Autonomous agent queue
- Agent supervision loop
- Confidence-based approval triggers

## Architecture

```
/standup
    │
    ▼
┌─────────────────┐
│ product-owner   │
│    skill        │
└────────┬────────┘
         │
    ┌────┴────┐
    ▼         ▼
┌───────┐  ┌─────────┐
│GitHub │  │contextd │
│  MCP  │  │   MCP   │
└───┬───┘  └────┬────┘
    │           │
    ▼           ▼
┌───────┐  ┌─────────┐
│ PRs   │  │Memories │
│Issues │  │Checkpts │
│Branch │  └─────────┘
└───────┘
    │
    ▼
┌─────────────────┐
│ GitHub          │
│ Discussion      │
│ (daily thread)  │
└─────────────────┘
```

## GitHub Discussion Output

### Format

Daily Discussion created with:
- **Title**: `Daily Standup: YYYY-MM-DD`
- **Category**: `Standups` (create if not exists)
- **Body**: Full standup report

### Discussion Body Template

```markdown
## Daily Standup: {repo}
**Date**: {date} at {time}

### Yesterday
- {accomplishments from checkpoint}
- {velocity: n issues closed, m PRs merged}

### Priority Items

**CRITICAL ({count})**
{items or "(none - great!)"}

**HIGH ({count})**
{items}

**MEDIUM ({count})**
{items}

### Carried Over
{items from yesterday not completed}

### Recommendations
1. {actionable step}
2. {actionable step}
3. {actionable step}

---
*Generated by product-owner agent*
```

## Data Flow

1. **Load Context**
   - Resume yesterday's checkpoint from contextd
   - Search memories for patterns/blockers

2. **Query GitHub**
   - Open PRs with review status
   - Issues by priority label
   - Recent commits on main

3. **Synthesize Priorities**
   - Classify by CRITICAL/HIGH/MEDIUM
   - Identify carried-over items
   - Generate recommendations

4. **Output**
   - Display in terminal
   - Create GitHub Discussion

5. **Persist**
   - Save checkpoint for tomorrow
   - Record notable blockers to memory

## Priority Classification

| Level | Criteria |
|-------|----------|
| CRITICAL | Security, failing CI, blocked >24h |
| HIGH | Ready to merge, priority:high label |
| MEDIUM | In review, priority:medium |
| CARRIED OVER | From yesterday, not completed |

## Implementation Tasks

1. ~~Add `--discussion` flag to `/standup` command~~ → Replaced with GHA workflow
2. Create `.github/workflows/daily-standup.yml` ✓
3. Enable GitHub Discussions on marketplace repo
4. Create `Standups` category in Discussions
5. Enable org-level Discussions with marketplace as source repo
6. Set up `ANTHROPIC_API_KEY` secret
7. Test workflow end-to-end

## GitHub Actions Workflow

The standup is generated via scheduled GHA workflow instead of CLI flag:

```yaml
# .github/workflows/daily-standup.yml
# Schedule: 9:00 AM UTC, Monday-Friday
# Actions used:
#   - anthropics/claude-code-action@v1 (generate content)
#   - abirismyname/create-discussion@v1 (post to Discussions)
```

### Manual Trigger

```bash
# Dry run (preview only)
gh workflow run daily-standup.yml -f dry_run=true

# Full run (creates Discussion)
gh workflow run daily-standup.yml
```

## Future Phases

### Phase 2: Cross-Project + Notifications
- `--platform` flag for multi-repo view
- Slack webhook for notifications
- Cross-project dependency detection

### Phase 3: Autonomous Agent Orchestration
- Work queue management
- Agent assignment (context-aware + PO-directed)
- Confidence-based approval triggers
- Supervision and re-prioritization

## Success Criteria

- [ ] `/standup` outputs to terminal (existing)
- [ ] `/standup --discussion` creates GitHub Discussion
- [ ] Discussion uses correct format
- [ ] Checkpoint saved for next standup
- [ ] Memories recorded for blockers
